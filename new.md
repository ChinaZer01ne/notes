全同步过程：

× Salve发送sync命令到Master

× Master启动一个后台进程，将Redis中的数据快照保存到文件中

× Master将保存数据快照期间接收到的写命令缓存起来

× Master完成写文件操作后，将该文件发送给Slave

× 使用新的AOF文件替换掉就得AOF文件

× Master将这期间收集的增量写命令发送给Slave端



增量同步过程：

× Master接收到用户的操作指令，判断是否需要传播到Slave（一般是增删改）

× 将操作记录追加到AOF文件

× 将操作传播到其他Slave：1、对齐主从库;2、往响应缓存写入指令

× 将缓存中的数据发送给Slave



Redis Sentinel
解决主从同步Master宕机后的主从切换问题

× 监控：检查主从服务器时候运行正常

× 提醒：通过API向管理员或者其他应用程序发送故障通知

× 自动故障迁移：主从切换 



流言协议Gossip

在杂乱无章中寻求一致

× 每个节点都随机的与对方通信，最终所有节点的状态达成一致

× 种子节点定期随机向其他节点发送节点列表以及需要传播的消息

× 不保证消息一定会传递给所有节点，但是最终会趋于一致




Redis的集群原理

如何从海量数据里快速找到所需？

× 分片：按照某种规则去划分数据，分散存储在多个节点上



一致性哈希算法：对2^32取模，将哈希值空间组织成虚拟的圆环



​	在节点较少的时候，会出现数据倾斜的问题，某一个节点的压力可能很大，解决这个问题，可以通过对节点求多个hash，构造多个虚拟节点，当数据打到虚拟节点是，我们再映射到，原来的节点上即可







谈谈对Java的理解？

× 平台无关性

× GC

× 语言特性

× 面向对象

× 类库

× 异常处理