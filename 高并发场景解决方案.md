# 高并发场景解决方案



​	**高并发**（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它一般是指通过设计保证系统能够同时并行处理很多请求。

​	高并发相关常用的一些指标有**响应时间（Response Time)**、**吞吐量（Throughput）**、**每秒查询率QPS（Query per Second）**、**并发用户数**等。

​	**响应时间**：系统对请求做出响应的时间。例如系统处理一个HTTP请求需要200ms，这个200ms就是系统的响应时间。

​	**吞吐量**：单位时间内处理的请求数量。

​	**QPS**：每秒响应请求数。在互联网领域，这个指标和吞吐量区分的没有那么明显。

​	**并发用户数**：同时承载正常使用系统功能的用户数量。例如一个即时通讯系统，同时在线量一定程度上代表了系统的并发用户数。





## 扩容



​	互联网分布式架构设计，提高系统并发能力的方式，方法论上主要有两种：**垂直扩展（Scale Up）**与**水平扩展（Scale Out）**。



* 垂直扩展（纵向扩展）：提升单机处理能力。垂直扩展的方式又有两种：

  > 1. 增强单机硬件性能，例如：增加CPU核数如32核，升级更好的网卡如万兆，升级更好的硬盘如SSD，扩充硬盘容量如2T，扩充系统内存如128G；
  > 2. 提升单机架构性能，例如：使用Cache来减少IO次数，使用异步来增加单服务吞吐量，使用无锁数据结构来减少响应时间。

* 水平扩展（横向扩展）：只要增加服务器数量，就能线性扩充系统性能。水平扩展对系统架构设计是有要求的，如何在架构各层进行可水平扩展的设计，以及互联网公司架构各层常见的水平扩展实践，是各个企业关注的内容。



​	简单理解：垂直扩展就是加班，水平扩展就是加人。



​	在互联网业务发展非常迅猛的早期，如果预算不是问题，强烈建议使用“增强单机硬件性能”的方式提升系统并发能力，因为这个阶段，公司的战略往往是发展业务抢时间，而“增强单机硬件性能”往往是最快的方法。

​	对于垂直扩展来说，不管是提升单机硬件性能，还是提升单机架构性能，都有一个致命的不足：单机性能总是有极限的。所以互联网分布式架构设计**高并发终极解决方案还是水平扩展**。



[参考博文链接](https://www.jianshu.com/p/be66a52d2b9b)



### 数据库

读操作扩展：memcache、redis、CDN等

写操作扩展：Cassandra、Hbase



## 缓存



### 缓存的特征

* 命中率：命中数/(命中数+未命中数)
* 最大元素（空间）
* 清空策略：FIFO，LFU，LRU，过期时间，随机等